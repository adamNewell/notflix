version: '2'
services:
  base:
    image: phusion/baseimage
    container_name: base
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /media/server:/media
      - /data/torrent:/downloads
  torrent:
    image: diameter/rtorrent-rutorrent:64
    container_name: torrent
    volumes_from:
      - base
    ports:
      - 5500:80
      - 49160:49160/udp
      - 49161:49161
  usenet:
    image: linuxserver/sabnzbd
    container_name: usenet
    volumes_from:
      - base
    environment:
      - PGID=1000
      - PUID=1000
    ports:
      - 5510:8080
      - 9090:9090
  couchpotato:
    image: linuxserver/couchpotato
    container_name: couchpotato
    volumes_from:
      - base
    volumes:
      - /config/couchpotato:/config
    environment:
      - PGID=1000
      - PUID=1000
    ports:
      - 5520:5050
    restart: always
    links:
      - torrent
      - usenet
  sonarr:
    image: linuxserver/sonarr
    container_name: sonarr
    volumes_from:
      - base
    volumes:
      - /config/sonarr:/config
    environment:
      - PGID=1000
      - PUID=1000
    ports:
      - 5530:8989
    restart: always
    links:
      - torrent
      - usenet
  plexrequests:
    image: rogueosb/plexrequestsnet
    container_name: plexrequests
    volumes_from:
      - base
    volumes:
      - /config/plexrequests:/config
    ports:
      - 5540:3579
    restart: always
    links:
      - couchpotato
      - sonarr
  plex:
    image: linuxserver/plex
    container_name: plex
    volumes_from:
      - base
    volumes:
      - /data/plex/transcode:/transcode
      - /config/plex:/config
    environment:
      - PGID=1000
      - PUID=1000
      - VERSION=latest
      - TZ=America/Denver
    network_mode: "host"
  plexpy:
    image: linuxserver/plexpy
    container_name: plexpy
    volumes_from:
      - base
    volumes:
      - /config/plexpy:/config
      - /data/plexpy/logs
    environment:
      - PGID=1000
      - PUID=1000
      - TZ=America/Denver
    ports:
      - 5550:8181
